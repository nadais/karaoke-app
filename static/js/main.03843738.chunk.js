(this["webpackJsonpkaraoke-catalog-app-pwa"]=this["webpackJsonpkaraoke-catalog-app-pwa"]||[]).push([[0],{72:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(8),l=a.n(r),s=a(18),i=a.n(s),o=a(26),u=a(2),d=a(27),j=a(73),b=a(20),f=a(1);var h=function(e){return Object(f.jsx)("input",{type:"checkbox",onChange:function(t){var a=t.target.checked,n=e.column.colId,c=JSON.parse(localStorage.getItem("mylist"));null==c&&(c=[]),a?c.push(e.node.data.key):c=c.filter((function(t){return t!==e.node.data.key})),localStorage.setItem("mylist",JSON.stringify(c)),e.node.setDataValue(n,a),e.callbackSelectedList(c)},checked:e.value})};a(65),a(66);function g(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)([]),r=Object(u.a)(c,2),l=r[0],s=r[1],g=Object(b.b)(),O=Object(u.a)(g,2),p=O[0],m=O[1],x=Object(j.a)(),v=x.t,k=x.i18n,S=Object(n.useState)([{headerName:he("mylist"),field:"selected",cellRenderer:"checkboxRenderer",cellRendererParams:{callbackSelectedList:a},sort:"desc",flex:1},{field:"number",headerName:he("number"),sortable:!0,filter:!0,flex:1,minWidth:80},{field:"name",headerName:he("name"),sortable:!0,filter:!0,flex:4,minWidth:250},{field:"artist",headerName:he("artist"),sortable:!0,filter:!0,flex:2,sort:"asc",minWidth:170}]),y=Object(u.a)(S,1)[0],N=Object(n.useState)([]),w=Object(u.a)(N,2),C=w[0],L=w[1],R=Object(n.useState)(null),I=Object(u.a)(R,2),G=I[0],J=I[1],M=Object(n.useState)(!1),D=Object(u.a)(M,2),E=D[0],P=D[1],F=Object(n.useState)([]),W=Object(u.a)(F,2),z=W[0],V=W[1],A=Object(n.useState)([]),B=Object(u.a)(A,2),K=B[0],Q=B[1],T=Object(n.useState)([]),U=Object(u.a)(T,2),q=U[0],H=U[1],X=Object(n.useState)(void 0),Y=Object(u.a)(X,2),Z=Y[0],$=Y[1],_=Object(n.useState)(void 0),ee=Object(u.a)(_,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(void 0),ce=Object(u.a)(ne,2),re=ce[0],le=ce[1],se={padding:10},ie={width:"100%",padding:"10px 20px",borderRadius:20,outline:0,border:"2px #68bf40 solid",fontSize:"100%"},oe=function(e){G.setQuickFilter(e.target.value)};function ue(){return ue=Object(o.a)(i.a.mark((function e(t){var n,c,r,l,o,u,d,j,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,fetch("https://karaoke-juliane.herokuapp.com/songs/genres?language=".concat(null!==t&&void 0!==t?t:""));case 3:return n=e.sent,e.next=6,fetch("https://karaoke-juliane.herokuapp.com/songs");case 6:return c=e.sent,e.next=9,c.json();case 9:return r=e.sent,e.next=12,n.json();case 12:l=e.sent,H(l),P(!1),null==(o=JSON.parse(localStorage.getItem("mylist")))&&(o=[]),a(o),u=(u=r.songGroups).map((function(e){return e.selected=o.includes(e.key),e})),d=u.flatMap((function(e){return e.catalogs})).filter((function(e,t,a){return a.indexOf(e)===t&&null!=e})),j=u.flatMap((function(e){return e.categories})).filter((function(e,t,a){return a.indexOf(e)===t&&null!=e})),b=u.flatMap((function(e){return e.genres})).filter((function(e,t,a){return a.indexOf(e)===t&&null!=e})).map((function(e){return l.find((function(t){return t.id===e}))})).filter((function(e){return null!=e})),H(b),V(d),Q(j),s(r.songGroups),L(u);case 28:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}function de(e,t,a){var n=null==e||""===e?l:l.filter((function(t){return t.catalogs.includes(e)}));return null!=t&&""!==t&&(n=n.filter((function(e){return e.categories.includes(t)}))),null!=a&&""!==a&&(n=n.filter((function(e){return e.genres.includes(a)}))),n}function je(e){var t=""===e.target.value?void 0:e.target.value;ae(t),L(de(re,t,Z))}function be(e){var t=""===e.target.value?void 0:parseInt(e.target.value);$(t),L(de(re,te,t))}function fe(e){var t=e.target.value,a=new URLSearchParams(p.toString());a.set("lang",t),m(a.toString()),k.changeLanguage(t)}function he(e){return v(e)}return Object(n.useEffect)((function(){var e=p.get("lang");null!=e&&k.changeLanguage(e),function(e){ue.apply(this,arguments)}(e)}),[k,p]),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{class:"row",children:Object(f.jsx)("div",{class:"col-6 offset-md-4 offset-lg-4",children:Object(f.jsx)("img",{class:"header-image",src:"header.png",alt:"Karaoke night"})})}),function(){var e=l.filter((function(e){return!0===e.selected}));if(e.length>0)return Object(f.jsx)("div",{class:"accordion accordion-flush",children:Object(f.jsxs)("div",{class:"accordion-item",children:[Object(f.jsx)("h2",{class:"accordion-header",id:"headingOne",children:Object(f.jsx)("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne",children:he("mylist")})}),Object(f.jsx)("div",{id:"collapseOne",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:Object(f.jsx)("div",{class:"accordion-body",children:Object(f.jsx)("ul",{children:e.map((function(e){return Object(f.jsxs)("li",{children:[" ",e.number," - ",e.artist," - ",e.name]},e.key)}))})})})]})})}(),function(){var e={en:"English",pt:"Portugu\xeas",fr:"Fran\xe7ais",it:"Italiano"};return Object(f.jsx)("span",{children:Object(f.jsxs)("select",{name:"language",onChange:fe,children:[Object(f.jsxs)("option",{selected:!0,disabled:!0,children:[" ",v("selectLanguage")]}),Object.keys(e).map((function(t){return Object(f.jsx)("option",{value:t,children:e[t]},t)}))]})})}(),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("select",{className:"form-select",name:"catalog",onChange:function(e){var t=""===e.target.value?void 0:e.target.value;le(t),L(de(t,te,Z))},children:[Object(f.jsx)("option",{value:"",children:v("selectCatalog")}),z.map((function(e){return Object(f.jsx)("option",{value:e,children:v("catalogs.".concat(e.toLowerCase()))},e)}))]})}),Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("select",{className:"form-select",name:"catalog",onChange:je,children:[Object(f.jsxs)("option",{value:"",children:[" ",v("selectCategory")]}),K.map((function(e){return Object(f.jsx)("option",{value:e,children:v("categories.".concat(e.toLowerCase()))},e)}))]})}),Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("select",{className:"form-select",name:"catalog",onChange:be,children:[Object(f.jsxs)("option",{value:"",children:[" ",v("selectGenre")]}),q.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),Object(f.jsx)("div",{className:"col",children:function(){if(E)return Object(f.jsx)("div",{className:"spinner-border",role:"status",children:Object(f.jsxs)("span",{className:"visually-hidden",children:[" ",v("loading")]})})}()})]}),function(){if(C.length>0)return Object(f.jsx)("div",{style:se,children:Object(f.jsx)("input",{type:"search",style:ie,onChange:oe,placeholder:v("searchSongs")})})}(),Object(f.jsx)("div",{className:"ag-theme-alpine",style:{height:1e3},children:Object(f.jsx)(d.AgGridReact,{rowData:C,defaultColDef:{sortable:!0,resizable:!0,filter:!0,suppressMovable:!0},columnDefs:y,localeTextFunc:he,frameworkComponents:{checkboxRenderer:h},onGridReady:function(e){J(e.api)}})})]})}function O(){return Object(f.jsx)(b.a,{children:Object(f.jsx)(n.Suspense,{fallback:"loading",children:Object(f.jsx)(g,{})})})}var p=a(19),m=a(9),x=a(31),v=a(33);p.a.use(m.e).use(x.a).use(v.a).init({fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1},backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"}});p.a;l.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(O,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.03843738.chunk.js.map