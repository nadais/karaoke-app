(this["webpackJsonpkaraoke-catalog-app-pwa"]=this["webpackJsonpkaraoke-catalog-app-pwa"]||[]).push([[0],{72:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(8),s=n.n(r),l=n(18),i=n.n(l),o=n(27),u=n(2),d=n(19),j=n(73),b=n(21),f=n(1);var h=function(e){return Object(f.jsx)("input",{type:"checkbox",onChange:function(t){var n=t.target.checked,a=e.column.colId,c=JSON.parse(localStorage.getItem("mylist"));null==c&&(c=[]),n?c.push(e.node.data.id):c=c.filter((function(t){return t!==e.node.data.id})),localStorage.setItem("mylist",JSON.stringify(c)),e.node.setDataValue(a,n)},checked:e.value})};n(65),n(66);function g(){var e=Object(b.b)(),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(j.a)(),s=r.t,l=r.i18n;d.AgGridColumn,je("name");var g=Object(a.useState)([{headerName:je("mylist"),field:"selected",cellRenderer:"checkboxRenderer",sort:"desc",flex:1},{field:"number",headerName:je("number"),sortable:!0,filter:!0,flex:1,minWidth:80},{field:"name",headerName:je("name"),sortable:!0,filter:!0,flex:4,minWidth:250},{field:"artist",headerName:je("artist"),sortable:!0,filter:!0,flex:2,sort:"asc",minWidth:170}]),p=Object(u.a)(g,1)[0],O=Object(a.useState)([]),m=Object(u.a)(O,2),x=m[0],v=m[1],k=Object(a.useState)(null),S=Object(u.a)(k,2),y=S[0],N=S[1],w=Object(a.useState)(!1),C=Object(u.a)(w,2),I=C[0],L=C[1],R=Object(a.useState)([]),G=Object(u.a)(R,2),J=G[0],M=G[1],D=Object(a.useState)([]),E=Object(u.a)(D,2),F=E[0],P=E[1],W=Object(a.useState)([]),z=Object(u.a)(W,2),A=z[0],V=z[1],B=Object(a.useState)([]),K=Object(u.a)(B,2),Q=K[0],T=K[1],U=Object(a.useState)(void 0),q=Object(u.a)(U,2),H=q[0],X=q[1],Y=Object(a.useState)(void 0),Z=Object(u.a)(Y,2),$=Z[0],_=Z[1],ee=Object(a.useState)(void 0),te=Object(u.a)(ee,2),ne=te[0],ae=te[1],ce={padding:10},re={width:"100%",padding:"10px 20px",borderRadius:20,outline:0,border:"2px #68bf40 solid",fontSize:"100%"},se=function(e){y.setQuickFilter(e.target.value)};function le(){return le=Object(o.a)(i.a.mark((function e(t){var n,a,c,r,s,l,o,u,d,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,fetch("https://karaoke-juliane.herokuapp.com/songs/genres?language=".concat(null!==t&&void 0!==t?t:""));case 3:return n=e.sent,e.next=6,fetch("https://karaoke-juliane.herokuapp.com/songs");case 6:return a=e.sent,e.next=9,a.json();case 9:return c=e.sent,e.next=12,n.json();case 12:r=e.sent,T(r),L(!1),s=localStorage.getItem("mylist"),null==(l=JSON.parse(s))&&(l=[]),o=(o=c.songGroups).map((function(e){return e.selected=l.includes(e.id),e})),u=o.flatMap((function(e){return e.catalogs})).filter((function(e,t,n){return n.indexOf(e)===t&&null!=e})),d=o.flatMap((function(e){return e.categories})).filter((function(e,t,n){return n.indexOf(e)===t&&null!=e})),j=o.flatMap((function(e){return e.genres})).filter((function(e,t,n){return n.indexOf(e)===t&&null!=e})).map((function(e){return r.find((function(t){return t.id===e}))})).filter((function(e){return null!=e})),T(j),P(u),V(d),M(c.songGroups),v(o);case 28:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}function ie(e,t,n){var a=null==e||""===e?J:J.filter((function(t){return t.catalogs.includes(e)}));return null!=t&&""!==t&&(a=a.filter((function(e){return e.categories.includes(t)}))),null!=n&&""!==n&&(a=a.filter((function(e){return e.genres.includes(n)}))),a}function oe(e){var t=""===e.target.value?void 0:e.target.value;_(t),v(ie(ne,t,H))}function ue(e){var t=""===e.target.value?void 0:parseInt(e.target.value);X(t),v(ie(ne,$,t))}function de(e){var t=e.target.value,a=new URLSearchParams(n.toString());a.set("lang",t),c(a.toString()),l.changeLanguage(t)}function je(e){return s(e)}return Object(a.useEffect)((function(){var e=n.get("lang");null!=e&&l.changeLanguage(e),function(e){le.apply(this,arguments)}(e)}),[l,n]),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{class:"row",children:Object(f.jsx)("div",{class:"col-6 offset-md-4 offset-lg-4",children:Object(f.jsx)("img",{class:"header-image",src:"header.png",alt:"Karaoke night"})})}),function(){var e=x.filter((function(e){return!0===e.selected}));if(e.length>0)return Object(f.jsx)("div",{class:"accordion accordion-flush",children:Object(f.jsxs)("div",{class:"accordion-item",children:[Object(f.jsx)("h2",{class:"accordion-header",id:"headingOne",children:Object(f.jsx)("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne",children:je("mylist")})}),Object(f.jsx)("div",{id:"collapseOne",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:Object(f.jsx)("div",{class:"accordion-body",children:Object(f.jsx)("ul",{children:e.map((function(e){return Object(f.jsxs)("li",{children:[" ",e.number," - ",e.artist," - ",e.name]},e.key)}))})})})]})})}(),function(){var e={en:"English",pt:"Portugu\xeas",fr:"Fran\xe7ais",it:"Italiano"};return Object(f.jsx)("span",{children:Object(f.jsxs)("select",{name:"language",onChange:de,children:[Object(f.jsxs)("option",{selected:!0,disabled:!0,children:[" ",s("selectLanguage")]}),Object.keys(e).map((function(t){return Object(f.jsx)("option",{value:t,children:e[t]},t)}))]})})}(),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("select",{className:"form-select",name:"catalog",onChange:function(e){var t=""===e.target.value?void 0:e.target.value;ae(t),v(ie(t,$,H))},children:[Object(f.jsx)("option",{value:"",children:s("selectCatalog")}),F.map((function(e){return Object(f.jsx)("option",{value:e,children:s("catalogs.".concat(e.toLowerCase()))},e)}))]})}),Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("select",{className:"form-select",name:"catalog",onChange:oe,children:[Object(f.jsxs)("option",{value:"",children:[" ",s("selectCategory")]}),A.map((function(e){return Object(f.jsx)("option",{value:e,children:s("categories.".concat(e.toLowerCase()))},e)}))]})}),Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("select",{className:"form-select",name:"catalog",onChange:ue,children:[Object(f.jsxs)("option",{value:"",children:[" ",s("selectGenre")]}),Q.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),Object(f.jsx)("div",{className:"col",children:function(){if(I)return Object(f.jsx)("div",{className:"spinner-border",role:"status",children:Object(f.jsxs)("span",{className:"visually-hidden",children:[" ",s("loading")]})})}()})]}),function(){if(x.length>0)return Object(f.jsx)("div",{style:ce,children:Object(f.jsx)("input",{type:"search",style:re,onChange:se,placeholder:s("searchSongs")})})}(),Object(f.jsx)("div",{className:"ag-theme-alpine",style:{height:1e3},children:Object(f.jsx)(d.AgGridReact,{rowData:x,defaultColDef:{sortable:!0,resizable:!0,filter:!0,suppressMovable:!0},columnDefs:p,localeTextFunc:je,frameworkComponents:{checkboxRenderer:h},onGridReady:function(e){N(e.api)}})})]})}function p(){return Object(f.jsx)(b.a,{children:Object(f.jsx)(a.Suspense,{fallback:"loading",children:Object(f.jsx)(g,{})})})}var O=n(20),m=n(9),x=n(31),v=n(33);O.a.use(m.e).use(x.a).use(v.a).init({fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1},backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"}});O.a;s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(p,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.4b9d9fbf.chunk.js.map