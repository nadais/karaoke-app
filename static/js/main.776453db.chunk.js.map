{"version":3,"sources":["App.js","index.js"],"names":["App","useState","rowData","setRowData","gridApi","setGridApi","loading","setLoading","songs","setSongs","catalogs","setCatalogs","categories","setCategories","undefined","category","setCategory","catalogName","setCatalogName","setGridColumnApi","searchDivStyle","backgroundColor","padding","searchStyle","width","borderRadius","outline","border","fontSize","onFilterTextChange","e","setQuickFilter","target","value","fetchSongsRemotely","fetch","then","result","json","response","fullCatalog","songGroups","flatMap","x","filter","v","i","a","indexOf","getRowData","newCatalogName","newCategory","includes","onCategoryChanged","event","useEffect","align","className","name","onChange","newCatalog","map","key","onClick","role","getLoading","length","style","type","placeholder","getSearchBar","defaultColDef","sortable","resizable","onGridReady","params","api","columnApi","field","flex","minWidth","sort","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.776453db.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { AgGridColumn, AgGridReact } from 'ag-grid-react';\n\nimport 'ag-grid-community/dist/styles/ag-grid.css';\nimport 'ag-grid-community/dist/styles/ag-theme-alpine.css';\n\nfunction App() {\n    const [rowData, setRowData] = useState([]);\n    const [gridApi, setGridApi] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [songs, setSongs] = useState([]);\n    const [catalogs, setCatalogs] = useState([]);\n    const [categories, setCategories] = useState([]);\n    const [category, setCategory] = useState(undefined);\n    const [catalogName, setCatalogName] = useState(undefined);\n    const [gridColumnApi, setGridColumnApi] = useState(null);\n    const searchDivStyle = { backgroundColor: \"#dedede\", padding: 10 }\n    const searchStyle = {\n        width: \"100%\", padding: \"10px 20px\", borderRadius: 20, outline: 0,\n        border: \"2px #68bf40 solid\", fontSize: \"100%\"\n    }\n\n    const onGridReady = (params) => {\n        setGridApi(params.api);\n        setGridColumnApi(params.columnApi);\n    };\n    const onFilterTextChange = (e) => {\n        gridApi.setQuickFilter(e.target.value)\n    }\n    useEffect(() => {\n        fetchSongsRemotely();\n    }, []);\n    function getLoading() {\n        if (loading) {\n            return <div className=\"spinner-border\" role=\"status\">\n                <span className=\"visually-hidden\">Loading...</span>\n            </div>\n        }\n    }\n    function getCategories() {\n        return <div className=\"col\">\n            <select className=\"form-select\" name='catalog' onChange={onCategoryChanged}>\n                <option value=\"\"> Select category</option>\n                {categories.map(key =>\n                    (<option value={key} key={key}>{key}</option>))}\n            </select>\n        </div>\n    }\n    function getSearchBar() {\n        if (rowData.length > 0) {\n            return <div style={searchDivStyle}>\n                <input type=\"search\" style={searchStyle} onChange={onFilterTextChange} placeholder=\"search songs...\" />\n            </div>\n        }\n    }\n    function fetchSongsRemotely() {\n        setLoading(true);\n        fetch('https://karaoke-juliane.herokuapp.com/songs')\n            .then(result => {\n                var test = result.json();\n                return test;\n            })\n            .then(response => {\n                setLoading(false);\n                let fullCatalog = response.songGroups;\n                let catalogs = fullCatalog.flatMap(x => x.catalogs).filter((v, i, a) => a.indexOf(v) === i && v != null);\n                let categories = fullCatalog.flatMap(x => x.categories).filter((v, i, a) => a.indexOf(v) === i && v != null);\n                setCatalogs(catalogs);\n                setCategories(categories);\n                setSongs(response.songGroups);\n                setRowData(fullCatalog);\n            });\n    }\n\n    function getRowData(newCatalogName, newCategory)\n    {\n        let result = newCatalogName == null || newCatalogName === '' ? songs : songs.filter(x => x.catalogs.includes(newCatalogName));\n        if(newCategory != null && newCategory !== '')\n        {\n            result = result.filter(x =>x.categories.includes(newCategory));\n        }\n        return result;\n    }\n\n    function onCategoryChanged(event) {\n        let newCategory = event.target.value === '' ? undefined : event.target.value;\n        setCategory(newCategory);\n        setRowData(getRowData(catalogName, newCategory));\n    }\n\n    function onCatalogChanged(event) {\n        let newCatalog = event.target.value === '' ? undefined : event.target.value;\n        setCatalogName(newCatalog);\n        setRowData(getRowData(newCatalog, category));\n    }\n\n    return (\n        <div>\n            <h1 align=\"center\">Karaoke night</h1>\n            <div className=\"row\">\n                <div className=\"col\">\n                    <select className=\"form-select\" name='catalog' onChange={onCatalogChanged}>\n                        <option value=\"\"> Select catalog</option>\n                        {catalogs.map(key =>\n                            (<option value={key} key={key}>{key}</option>))}\n                    </select>\n                </div>\n                {getCategories()}\n                <div className=\"col\">\n                    <button onClick={fetchSongsRemotely} className=\"btn btn-primary\">\n                        Reload Songs\n                    </button>\n                    {getLoading()}\n                </div>\n            </div>\n            {getSearchBar()}\n\n\n            <div className=\"ag-theme-alpine\"  style={{ \"height\": 1000 }}>\n                <AgGridReact rowData={rowData}\n                    defaultColDef={{\n                        sortable: true,\n                        resizable: true,\n                        filter: true,\n                    }}\n                    onGridReady={onGridReady}>\n                    <AgGridColumn field=\"number\" sortable={true} filter={true} flex={1} minWidth={80}/>\n                    <AgGridColumn field=\"name\" sortable={true} filter={true} flex={4}/>\n                    <AgGridColumn field=\"artist\" sortable={true} filter={true} flex={2} sort={'asc'}/>\n                </AgGridReact>\n            </div>\n        </div>\n    );\n};\n\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}