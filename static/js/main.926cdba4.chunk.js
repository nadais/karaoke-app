(this["webpackJsonpkaraoke-catalog-app-pwa"]=this["webpackJsonpkaraoke-catalog-app-pwa"]||[]).push([[0],{72:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(8),s=n.n(r),l=n(19),i=n.n(l),o=n(27),u=n(2),j=n(9),d=n(73),b=n(21),f=(n(64),n(65),n(1));function g(){var e=Object(b.b)(),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(d.a)(),s=r.t,l=r.i18n,g=Object(a.useState)([]),h=Object(u.a)(g,2),O=h[0],p=h[1],x=Object(a.useState)(null),m=Object(u.a)(x,2),v=m[0],k=m[1],S=Object(a.useState)(!1),N=Object(u.a)(S,2),w=N[0],C=N[1],y=Object(a.useState)([]),G=Object(u.a)(y,2),L=G[0],M=G[1],A=Object(a.useState)([]),R=Object(u.a)(A,2),E=R[0],F=R[1],I=Object(a.useState)([]),P=Object(u.a)(I,2),W=P[0],z=P[1],D=Object(a.useState)([]),J=Object(u.a)(D,2),B=J[0],Q=J[1],T=Object(a.useState)(void 0),U=Object(u.a)(T,2),V=U[0],q=U[1],H=Object(a.useState)(void 0),K=Object(u.a)(H,2),X=K[0],Y=K[1],Z=Object(a.useState)(void 0),$=Object(u.a)(Z,2),_=$[0],ee=$[1],te={padding:10},ne={width:"100%",padding:"10px 20px",borderRadius:20,outline:0,border:"2px #68bf40 solid",fontSize:"100%"},ae=function(e){v.setQuickFilter(e.target.value)};function ce(){return ce=Object(o.a)(i.a.mark((function e(t){var n,a,c,r,s,l,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,fetch("https://karaoke-juliane.herokuapp.com/songs/genres?language=".concat(null!==t&&void 0!==t?t:""));case 3:return n=e.sent,e.next=6,fetch("https://karaoke-juliane.herokuapp.com/songs");case 6:return a=e.sent,e.next=9,a.json();case 9:return c=e.sent,e.next=12,n.json();case 12:r=e.sent,Q(r),C(!1),s=c.songGroups,l=s.flatMap((function(e){return e.catalogs})).filter((function(e,t,n){return n.indexOf(e)===t&&null!=e})),o=s.flatMap((function(e){return e.categories})).filter((function(e,t,n){return n.indexOf(e)===t&&null!=e})),u=s.flatMap((function(e){return e.genres})).filter((function(e,t,n){return n.indexOf(e)===t&&null!=e})).map((function(e){return r.find((function(t){return t.id===e}))})).filter((function(e){return null!=e})),Q(u),F(l),z(o),M(c.songGroups),p(s);case 24:case"end":return e.stop()}}),e)}))),ce.apply(this,arguments)}function re(e,t,n){var a=null==e||""===e?L:L.filter((function(t){return t.catalogs.includes(e)}));return null!=t&&""!==t&&(a=a.filter((function(e){return e.categories.includes(t)}))),null!=n&&""!==n&&(a=a.filter((function(e){return e.genres.includes(n)}))),a}function se(e){var t=""===e.target.value?void 0:e.target.value;Y(t),p(re(_,t,V))}function le(e){var t=""===e.target.value?void 0:parseInt(e.target.value);q(t),p(re(_,X,t))}function ie(e){var t=e.target.value,a=new URLSearchParams(n.toString());a.set("lang",t),c(a.toString()),l.changeLanguage(t)}function oe(e){return s(e)}return Object(a.useEffect)((function(){var e=n.get("lang");null!=e&&l.changeLanguage(e),function(e){ce.apply(this,arguments)}(e)}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{class:"row",children:Object(f.jsx)("div",{class:"col-6 offset-md-4 offset-lg-4",children:Object(f.jsx)("img",{class:"header-image",src:"header.png"})})}),function(){var e={en:"English",pt:"Portugu\xeas",fr:"Fran\xe7ais",it:"Italiano"};return Object(f.jsx)("span",{children:Object(f.jsxs)("select",{name:"language",onChange:ie,children:[Object(f.jsxs)("option",{selected:!0,disabled:!0,children:[" ",s("selectLanguage")]}),Object.keys(e).map((function(t){return Object(f.jsx)("option",{value:t,children:e[t]},t)}))]})})}(),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("select",{className:"form-select",name:"catalog",onChange:function(e){var t=""===e.target.value?void 0:e.target.value;ee(t),p(re(t,X,V))},children:[Object(f.jsx)("option",{value:"",children:s("selectCatalog")}),E.map((function(e){return Object(f.jsx)("option",{value:e,children:s("catalogs.".concat(e.toLowerCase()))},e)}))]})}),Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("select",{className:"form-select",name:"catalog",onChange:se,children:[Object(f.jsxs)("option",{value:"",children:[" ",s("selectCategory")]}),W.map((function(e){return Object(f.jsx)("option",{value:e,children:s("categories.".concat(e.toLowerCase()))},e)}))]})}),Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("select",{className:"form-select",name:"catalog",onChange:le,children:[Object(f.jsxs)("option",{value:"",children:[" ",s("selectGenre")]}),B.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),Object(f.jsx)("div",{className:"col",children:function(){if(w)return Object(f.jsx)("div",{className:"spinner-border",role:"status",children:Object(f.jsxs)("span",{className:"visually-hidden",children:[" ",s("loading")]})})}()})]}),function(){if(O.length>0)return Object(f.jsx)("div",{style:te,children:Object(f.jsx)("input",{type:"search",style:ne,onChange:ae,placeholder:s("searchSongs")})})}(),Object(f.jsx)("div",{className:"ag-theme-alpine",style:{height:1e3},children:Object(f.jsxs)(j.AgGridReact,{rowData:O,defaultColDef:{sortable:!0,resizable:!0,filter:!0,suppressMovable:!0},localeTextFunc:oe,onGridReady:function(e){k(e.api)},children:[Object(f.jsx)(j.AgGridColumn,{field:"number",headerName:oe("number"),sortable:!0,filter:!0,flex:1,minWidth:80}),Object(f.jsx)(j.AgGridColumn,{field:"name",headerName:oe("name"),sortable:!0,filter:!0,flex:4,minWidth:250}),Object(f.jsx)(j.AgGridColumn,{field:"artist",headerName:oe("artist"),sortable:!0,filter:!0,flex:2,sort:"asc",minWidth:170})]})})]})}function h(){return Object(f.jsx)(b.a,{children:Object(f.jsx)(a.Suspense,{fallback:"loading",children:Object(f.jsx)(g,{})})})}var O=n(20),p=n(10),x=n(31),m=n(33);O.a.use(p.e).use(x.a).use(m.a).init({fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1},backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"}});O.a;s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(h,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.926cdba4.chunk.js.map