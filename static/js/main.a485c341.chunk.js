(this["webpackJsonpkaraoke-catalog-app-pwa"]=this["webpackJsonpkaraoke-catalog-app-pwa"]||[]).push([[0],{72:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(8),s=n.n(r),l=n(19),i=n.n(l),o=n(27),u=n(2),d=n(9),j=n(73),b=n(21),f=(n(64),n(65),n(1));function g(){var e=Object(b.b)(),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(j.a)(),s=r.t,l=r.i18n,g=Object(a.useState)([]),h=Object(u.a)(g,2),O=h[0],p=h[1],x=Object(a.useState)(null),m=Object(u.a)(x,2),v=m[0],k=m[1],N=Object(a.useState)(!1),S=Object(u.a)(N,2),C=S[0],w=S[1],y=Object(a.useState)([]),G=Object(u.a)(y,2),L=G[0],A=G[1],M=Object(a.useState)([]),R=Object(u.a)(M,2),E=R[0],I=R[1],P=Object(a.useState)([]),W=Object(u.a)(P,2),z=W[0],D=W[1],F=Object(a.useState)([]),J=Object(u.a)(F,2),B=J[0],Q=J[1],T=Object(a.useState)(void 0),U=Object(u.a)(T,2),V=U[0],q=U[1],H=Object(a.useState)(void 0),K=Object(u.a)(H,2),X=K[0],Y=K[1],Z=Object(a.useState)(void 0),$=Object(u.a)(Z,2),_=$[0],ee=$[1],te={backgroundColor:"#dedede",padding:10},ne={width:"100%",padding:"10px 20px",borderRadius:20,outline:0,border:"2px #68bf40 solid",fontSize:"100%"},ae=function(e){v.setQuickFilter(e.target.value)};function ce(e){return re.apply(this,arguments)}function re(){return re=Object(o.a)(i.a.mark((function e(t){var n,a,c,r,s,l,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,fetch("https://karaoke-juliane.herokuapp.com/songs/genres?language=".concat(null!==t&&void 0!==t?t:""));case 3:return n=e.sent,e.next=6,fetch("https://karaoke-juliane.herokuapp.com/songs");case 6:return a=e.sent,e.next=9,a.json();case 9:return c=e.sent,e.next=12,n.json();case 12:r=e.sent,Q(r),w(!1),s=c.songGroups,l=s.flatMap((function(e){return e.catalogs})).filter((function(e,t,n){return n.indexOf(e)===t&&null!=e})),o=s.flatMap((function(e){return e.categories})).filter((function(e,t,n){return n.indexOf(e)===t&&null!=e})),u=s.map((function(e){return e.genreId})).filter((function(e,t,n){return n.indexOf(e)===t&&null!=e})).map((function(e){return r.find((function(t){return t.id===e}))})).filter((function(e){return null!=e})),Q(u),I(l),D(o),A(c.songGroups),p(s);case 24:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function se(e,t,n){var a=null==e||""===e?L:L.filter((function(t){return t.catalogs.includes(e)}));return null!=t&&""!==t&&(a=a.filter((function(e){return e.categories.includes(t)}))),null!=n&&""!==n&&(a=a.filter((function(e){return e.genreId==n}))),a}function le(e){var t=""===e.target.value?void 0:e.target.value;Y(t),p(se(_,t,V))}function ie(e){var t=""===e.target.value?void 0:e.target.value;q(t),p(se(_,X,t))}function oe(e){var t=e.target.value,a=new URLSearchParams(n.toString());a.set("lang",t),c(a.toString()),l.changeLanguage(t)}function ue(e){return s(e)}return Object(a.useEffect)((function(){var e=n.get("lang");null!=e&&l.changeLanguage(e),ce(e)}),[]),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col",children:Object(f.jsx)("h1",{align:"center",children:s("title")})}),function(){var e={en:"English",pt:"Portugu\xeas"};return Object(f.jsx)("span",{children:Object(f.jsxs)("select",{name:"language",onChange:oe,children:[Object(f.jsxs)("option",{selected:!0,disabled:!0,children:[" ",s("selectLanguage")]}),Object.keys(e).map((function(t){return Object(f.jsx)("option",{value:t,children:e[t]},t)}))]})})}()]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("select",{className:"form-select",name:"catalog",onChange:function(e){var t=""===e.target.value?void 0:e.target.value;ee(t),p(se(t,X,V))},children:[Object(f.jsx)("option",{value:"",children:s("selectCatalog")}),E.map((function(e){return Object(f.jsx)("option",{value:e,children:s("catalogs.".concat(e.toLowerCase()))},e)}))]})}),Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("select",{className:"form-select",name:"catalog",onChange:le,children:[Object(f.jsxs)("option",{value:"",children:[" ",s("selectCategory")]}),z.map((function(e){return Object(f.jsx)("option",{value:e,children:s("categories.".concat(e.toLowerCase()))},e)}))]})}),Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("select",{className:"form-select",name:"catalog",onChange:ie,children:[Object(f.jsxs)("option",{value:"",children:[" ",s("selectGenre")]}),B.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),Object(f.jsxs)("div",{className:"col",children:[Object(f.jsx)("button",{onClick:ce,className:"btn btn-primary",children:s("reload")}),function(){if(C)return Object(f.jsx)("div",{className:"spinner-border",role:"status",children:Object(f.jsxs)("span",{className:"visually-hidden",children:[" ",s("loading")]})})}()]})]}),function(){if(O.length>0)return Object(f.jsx)("div",{style:te,children:Object(f.jsx)("input",{type:"search",style:ne,onChange:ae,placeholder:s("searchSongs")})})}(),Object(f.jsx)("div",{className:"ag-theme-alpine",style:{height:1e3},children:Object(f.jsxs)(d.AgGridReact,{rowData:O,defaultColDef:{sortable:!0,resizable:!0,filter:!0,suppressMovable:!0},localeTextFunc:ue,onGridReady:function(e){k(e.api)},children:[Object(f.jsx)(d.AgGridColumn,{field:"number",headerName:ue("number"),sortable:!0,filter:!0,flex:1,minWidth:80}),Object(f.jsx)(d.AgGridColumn,{field:"name",headerName:ue("name"),sortable:!0,filter:!0,flex:4,minWidth:250}),Object(f.jsx)(d.AgGridColumn,{field:"artist",headerName:ue("artist"),sortable:!0,filter:!0,flex:2,sort:"asc",minWidth:170})]})})]})}function h(){return Object(f.jsx)(b.a,{children:Object(f.jsx)(a.Suspense,{fallback:"loading",children:Object(f.jsx)(g,{})})})}var O=n(20),p=n(10),x=n(31),m=n(33);O.a.use(p.e).use(x.a).use(m.a).init({fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1},backend:{loadPath:"/karaoke-app/locales/{{lng}}/{{ns}}.json"}});O.a;s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(h,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.a485c341.chunk.js.map