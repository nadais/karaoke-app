(this["webpackJsonpkaraoke-catalog-app-pwa"]=this["webpackJsonpkaraoke-catalog-app-pwa"]||[]).push([[0],{77:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(9),s=n.n(r),l=n(20),i=n.n(l),o=n(28),u=n(2),d=n(7),j=n(78),b=n(22),f=n(29),h=n(30),g=n(12),p=n(38),O=n(36),m=n(1),x=function(e){Object(p.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).checkedHandler=a.checkedHandler.bind(Object(g.a)(a)),a}return Object(h.a)(n,[{key:"checkedHandler",value:function(e){var t=e.target.checked,n=this.props.column.colId,a=JSON.parse(localStorage.getItem("mylist"));null==a&&(a=[]),t?a.push(this.props.node.data.id):a.remove(this.props.node.data.id),localStorage.setItem("mylist",JSON.stringify(a)),this.props.node.setDataValue(n,t)}},{key:"render",value:function(){return Object(m.jsx)("input",{type:"checkbox",onChange:this.checkedHandler,checked:this.props.value})}}]),n}(a.Component);n(70),n(71);function v(){var e=Object(b.b)(),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(j.a)(),s=r.t,l=r.i18n;d.AgGridColumn,be("name");var f=Object(a.useState)([{headerName:be("mylist"),field:"selected",cellRenderer:"checkboxRenderer",flex:1},{field:"number",headerName:be("number"),sortable:!0,filter:!0,flex:1,minWidth:80},{field:"name",headerName:be("name"),sortable:!0,filter:!0,flex:4,minWidth:250},{field:"artist",headerName:be("artist"),sortable:!0,filter:!0,flex:2,sort:"asc",minWidth:170}]),h=Object(u.a)(f,2),g=h[0],p=(h[1],Object(a.useState)([])),O=Object(u.a)(p,2),v=O[0],k=O[1],S=Object(a.useState)(null),N=Object(u.a)(S,2),y=N[0],C=N[1],w=Object(a.useState)(!1),G=Object(u.a)(w,2),I=G[0],L=G[1],R=Object(a.useState)([]),W=Object(u.a)(R,2),A=W[0],J=W[1],M=Object(a.useState)([]),D=Object(u.a)(M,2),H=D[0],E=D[1],F=Object(a.useState)([]),P=Object(u.a)(F,2),z=P[0],V=P[1],B=Object(a.useState)([]),Q=Object(u.a)(B,2),T=Q[0],U=Q[1],q=Object(a.useState)(void 0),K=Object(u.a)(q,2),X=K[0],Y=K[1],Z=Object(a.useState)(void 0),$=Object(u.a)(Z,2),_=$[0],ee=$[1],te=Object(a.useState)(void 0),ne=Object(u.a)(te,2),ae=ne[0],ce=ne[1],re={padding:10},se={width:"100%",padding:"10px 20px",borderRadius:20,outline:0,border:"2px #68bf40 solid",fontSize:"100%"},le=function(e){y.setQuickFilter(e.target.value)};function ie(){return ie=Object(o.a)(i.a.mark((function e(t){var n,a,c,r,s,l,o,u,d,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,fetch("https://karaoke-juliane.herokuapp.com/songs/genres?language=".concat(null!==t&&void 0!==t?t:""));case 3:return n=e.sent,e.next=6,fetch("https://karaoke-juliane.herokuapp.com/songs");case 6:return a=e.sent,e.next=9,a.json();case 9:return c=e.sent,e.next=12,n.json();case 12:r=e.sent,U(r),L(!1),s=localStorage.getItem("mylist"),null==(l=JSON.parse(s))&&(l=[]),o=(o=c.songGroups).map((function(e){return e.selected=l.includes(e.id),e})),u=o.flatMap((function(e){return e.catalogs})).filter((function(e,t,n){return n.indexOf(e)===t&&null!=e})),d=o.flatMap((function(e){return e.categories})).filter((function(e,t,n){return n.indexOf(e)===t&&null!=e})),j=o.flatMap((function(e){return e.genres})).filter((function(e,t,n){return n.indexOf(e)===t&&null!=e})).map((function(e){return r.find((function(t){return t.id===e}))})).filter((function(e){return null!=e})),U(j),E(u),V(d),J(c.songGroups),k(o);case 28:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function oe(e,t,n){var a=null==e||""===e?A:A.filter((function(t){return t.catalogs.includes(e)}));return null!=t&&""!==t&&(a=a.filter((function(e){return e.categories.includes(t)}))),null!=n&&""!==n&&(a=a.filter((function(e){return e.genres.includes(n)}))),a}function ue(e){var t=""===e.target.value?void 0:e.target.value;ee(t),k(oe(ae,t,X))}function de(e){var t=""===e.target.value?void 0:parseInt(e.target.value);Y(t),k(oe(ae,_,t))}function je(e){var t=e.target.value,a=new URLSearchParams(n.toString());a.set("lang",t),c(a.toString()),l.changeLanguage(t)}function be(e){return s(e)}return Object(a.useEffect)((function(){var e=n.get("lang");null!=e&&l.changeLanguage(e),function(e){ie.apply(this,arguments)}(e)}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{class:"row",children:Object(m.jsx)("div",{class:"col-6 offset-md-4 offset-lg-4",children:Object(m.jsx)("img",{class:"header-image",src:"header.png"})})}),function(){var e={en:"English",pt:"Portugu\xeas",fr:"Fran\xe7ais",it:"Italiano"};return Object(m.jsx)("span",{children:Object(m.jsxs)("select",{name:"language",onChange:je,children:[Object(m.jsxs)("option",{selected:!0,disabled:!0,children:[" ",s("selectLanguage")]}),Object.keys(e).map((function(t){return Object(m.jsx)("option",{value:t,children:e[t]},t)}))]})})}(),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("select",{className:"form-select",name:"catalog",onChange:function(e){var t=""===e.target.value?void 0:e.target.value;ce(t),k(oe(t,_,X))},children:[Object(m.jsx)("option",{value:"",children:s("selectCatalog")}),H.map((function(e){return Object(m.jsx)("option",{value:e,children:s("catalogs.".concat(e.toLowerCase()))},e)}))]})}),Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("select",{className:"form-select",name:"catalog",onChange:ue,children:[Object(m.jsxs)("option",{value:"",children:[" ",s("selectCategory")]}),z.map((function(e){return Object(m.jsx)("option",{value:e,children:s("categories.".concat(e.toLowerCase()))},e)}))]})}),Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("select",{className:"form-select",name:"catalog",onChange:de,children:[Object(m.jsxs)("option",{value:"",children:[" ",s("selectGenre")]}),T.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),Object(m.jsx)("div",{className:"col",children:function(){if(I)return Object(m.jsx)("div",{className:"spinner-border",role:"status",children:Object(m.jsxs)("span",{className:"visually-hidden",children:[" ",s("loading")]})})}()})]}),function(){if(v.length>0)return Object(m.jsx)("div",{style:re,children:Object(m.jsx)("input",{type:"search",style:se,onChange:le,placeholder:s("searchSongs")})})}(),Object(m.jsx)("div",{className:"ag-theme-alpine",style:{height:1e3},children:Object(m.jsxs)(d.AgGridReact,{rowData:v,defaultColDef:{sortable:!0,resizable:!0,filter:!0,suppressMovable:!0},columnDefs:g,localeTextFunc:be,onGridReady:function(e){C(e.api)},frameworkComponents:{checkboxRenderer:x},children:[Object(m.jsx)(d.AgGridColumn,{field:"number",headerName:be("number"),sortable:!0,filter:!0,flex:1,minWidth:80}),Object(m.jsx)(d.AgGridColumn,{field:"name",headerName:be("name"),sortable:!0,filter:!0,flex:4,minWidth:250}),Object(m.jsx)(d.AgGridColumn,{field:"artist",headerName:be("artist"),sortable:!0,filter:!0,flex:2,sort:"asc",minWidth:170})]})})]})}function k(){return Object(m.jsx)(b.a,{children:Object(m.jsx)(a.Suspense,{fallback:"loading",children:Object(m.jsx)(v,{})})})}var S=n(21),N=n(10),y=n(34),C=n(37);S.a.use(N.e).use(y.a).use(C.a).init({fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1},backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"}});S.a;s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.cd2739ce.chunk.js.map